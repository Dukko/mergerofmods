@asl_default_option = 4
can_modify_species = {
    root.owner = {
        if = {
            limit = {
                check_variable = {
                    which = asl_allowed_species
                    value > 0
                }
            }
            OR = {
                if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 1
                        }
                    }
                    count_exact_species = {
                        count < 1
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 2
                        }
                    }
                    count_exact_species = {
                        count < 2
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 3
                        }
                    }
                    count_exact_species = {
                        count < 3
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 4
                        }
                    }
                    count_exact_species = {
                        count < 4
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 5
                        }
                    }
                    count_exact_species = {
                        count < 5
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 6
                        }
                    }
                    count_exact_species = {
                        count < 6
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 7
                        }
                    }
                    count_exact_species = {
                        count < 7
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 8
                        }
                    }
                    count_exact_species = {
                        count < 8
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 9
                        }
                    }
                    count_exact_species = {
                        count < 9
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 10
                        }
                    }
                    count_exact_species = {
                        count < 10
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 11
                        }
                    }
                    count_exact_species = {
                        count < 11
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 12
                        }
                    }
                    count_exact_species = {
                        count < 12
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 13
                        }
                    }
                    count_exact_species = {
                        count < 13
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 14
                        }
                    }
                    count_exact_species = {
                        count < 14
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 15
                        }
                    }
                    count_exact_species = {
                        count < 15
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 16
                        }
                    }
                    count_exact_species = {
                        count < 16
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 17
                        }
                    }
                    count_exact_species = {
                        count < 17
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 18
                        }
                    }
                    count_exact_species = {
                        count < 18
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 19
                        }
                    }
                    count_exact_species = {
                        count < 19
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            which = asl_allowed_species
                            value = 20
                        }
                    }
                    count_exact_species = {
                        count < 20
                        limit = {
                            OR = {
                                is_same_species = prevprev
                                is_subspecies = prevprev
                            }
                        }
                    }
                }
                is_ai = no
            }
        }
        else = {
            OR = {
                count_exact_species = {
                    count < @asl_default_option
                    limit = {
                        OR = {
                            is_same_species = prevprev
                            is_subspecies = prevprev
                        }
                    }
                }
                is_ai = no
            }
        }
    }
    OR = {
        NOT = {
            has_trait = trait_self_modified
        }
        is_same_species = root
    }
}
