is_extradimensional_portal = {
    is_ship_size = dimensional_portal_ed
    OR = {
        owner = {
            is_same_empire = root
        }
        OR = {
            AND = {
                root = {
                    is_country_type = extradimensional
                }
                any_owned_ship = {
                    has_ship_flag = unbidden_portal
                }
            }
            AND = {
                root = {
                    is_country_type = extradimensional_2
                }
                any_owned_ship = {
                    has_ship_flag = aberrant_portal
                }
            }
            AND = {
                root = {
                    is_country_type = extradimensional_3
                }
                any_owned_ship = {
                    has_ship_flag = vehement_portal
                }
            }
        }
    }
}
