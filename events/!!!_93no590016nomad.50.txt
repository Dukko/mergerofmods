namespace = nomad
fleet_event = {
    id = nomad.50
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        queue_actions = {
            repeat = {
                while = {
                    id = nomad.50.wait_for_communication
                    exists = space_owner
                    space_owner = {
                        OR = {
                            is_country_type = default
                            is_country_type = fallen_empire
                            is_country_type = awakened_fallen_empire
                        }
                        NOR = {
                            is_hostile = root.owner
                            has_communications = root.owner
                        }
                    }
                }
                max_iterations = 30
                wait = {
                    duration = 12
                }
            }
            effect = {
                id = nomad.50.stopped_waiting
                solar_system = {
                    remove_star_flag = nomad_mission_waypoint
                }
                if = {
                    limit = {
                        space_owner = {
                            has_communications = root.owner
                            NOT = {
                                is_hostile = root.owner
                            }
                        }
                    }
                    space_owner = {
                        country_event = {
                            id = nomad.41
                        }
                    }
                }
                else = {
                    remove_fleet_flag = nomad_on_mission
                    fleet_event = {
                        id = nomad.2
                    }
                }
            }
        }
    }
}
