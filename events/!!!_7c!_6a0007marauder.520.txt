namespace = marauder
namespace = khan
country_event = {
    id = marauder.520
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        CmtTriggerIsKhanCountry = yes
        NOR = {
            has_country_flag = has_machinesmith
            has_global_flag = great_khan_wins
        }
    }
    immediate = {
        event_target:CmtGlobalVar = {
            if = {
                limit = {
                    NOR = {
                        check_variable = {
                            which = CmtVarReinforceCycle_Khan
                            value = 2
                        }
                        check_variable = {
                            which = CmtVarReinforceCycle_Khan
                            value = 3
                        }
                        check_variable = {
                            which = CmtVarReinforceCycle_Khan
                            value = 4
                        }
                    }
                }
                CmtEffectKhanReinforceOnCapital = yes
                root = {
                    country_event = {
                        id = marauder.520
                        days = 340
                    }
                    country_event = {
                        id = khan.299
                    }
                }
            }
            else = {
                if = {
                    limit = {
                        check_variable = {
                            which = CmtVarKhanReinforcementCounter
                            value > 9.5
                        }
                    }
                    CmtEffectKhanReinforceOnCapital = yes
                    change_variable = {
                        which = CmtVarKhanReinforcementCounter
                        value = -10
                    }
                }
                CmtEffectKhanIncreasementReinforcementCycle = yes
                root = {
                    country_event = {
                        id = marauder.520
                        days = 34
                    }
                }
            }
        }
    }
}
