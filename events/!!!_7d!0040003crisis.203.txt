namespace = crisis
planet_event = {
    id = crisis.203
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        owner = {
            is_country_type = "swarm"
        }
    }
    immediate = {
        every_owned_pop = {
            kill_pop = yes
        }
        if = {
            limit = {
                NOR = {
                    is_planet_class = pc_ringworld_habitable
                    is_planet_class = pc_habitat
                    is_planet_class = pc_alderson_slice_gaia
                    is_planet_class = pc_alderson_slice_ecu
                    is_planet_class = pc_alderson_slice_pc
                    is_planet_class = pc_ringworld_city
                    is_planet_class = pc_ringworld_machine
                    is_planet_class = pc_ringworld_hive
                    is_planet_class = pc_squareworld_habitable
                    is_planet_class = pc_birch
                    is_planet_class = pc_equatorial_shipyard
                    is_planet_class = pc_giga_penrose_habitable
                    is_planet_class = pc_gigaorbital_ring
                    is_planet_class = pc_interstellar_habitat
                    is_planet_class = pc_interstellar_ringworld_habitable
                    is_planet_class = pc_flat_world
                    is_planet_class = pc_habitable_gas_giant
                    is_planet_class = pc_virtual_reality
                    is_planet_class = pc_virtual_industry
                    is_planet_class = pc_virtual_stellar_industry
                    is_planet_class = pc_pd_gas_giant_hab
                    is_planet_class = pc_pd_barren_hab
                    is_planet_class = pc_pd_barren_cold_hab
                    is_planet_class = pc_pd_molten_hab
                    is_planet_class = pc_pd_frozen_hab
                    is_planet_class = pc_pd_hothouse_hab
                    is_planet_class = pc_pd_asteroid_hab
                    is_planet_class = pc_pd_toxic_hab
                    gpm_is_planet_class_habitat = yes
                    gpm_is_planet_class_ringworld = yes
                }
            }
            change_pc = pc_infested
            reset_planet = yes
            planet_event = {
                id = crisis.215
            }
            planet_event = {
                id = gpm_crisis.3
            }
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_ringworld_habitable
                    is_planet_class = pc_ringworld_city
                    is_planet_class = pc_ringworld_machine
                    is_planet_class = pc_ringworld_hive
                }
            }
            destroy_colony = yes
            change_pc = pc_ringworld_hive
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_alderson_slice_gaia
                    is_planet_class = pc_alderson_slice_ecu
                    is_planet_class = pc_alderson_slice_pc
                    is_planet_class = pc_alderson_slice_hive
                    is_planet_class = pc_alderson_slice_machine
                }
            }
            destroy_colony = yes
            change_pc = pc_alderson_slice_hive
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_squareworld_habitable
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_birch
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_equatorial_shipyard
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_giga_penrose_habitable
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_gigaorbital_ring
                }
            }
            destroy_colony = yes
            change_pc = pc_gigaorbital_ring_ruined
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_interstellar_habitat
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_interstellar_ringworld_habitable
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_flat_world
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_habitable_gas_giant
                    is_planet_class = pc_pd_gas_giant_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_gas_giant
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_virtual_reality
                    is_planet_class = pc_virtual_industry
                    is_planet_class = pc_virtual_stellar_industry
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_barren_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_barren
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_barren_cold_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_barren_cold
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_molten_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_molten
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_frozen_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_frozen
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_hothouse_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_hothouse
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_toxic_hab
                }
            }
            destroy_colony = yes
            change_pc = pc_toxic
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_pd_asteroid_hab
                }
            }
            destroy_colony = yes
            reset_planet = yes
        }
        else_if = {
            limit = {
                OR = {
                    is_planet_class = pc_habitat
                    gpm_is_planet_class_habitat = yes
                }
            }
            ariphaos_patch_remove_habitat = yes
        }
    }
}
