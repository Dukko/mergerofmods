decision_shroud_world = {
    icon = decision_shroud_world
    owned_planets_only = yes
    enactment_time = 1800
    resources = {
        category = decisions
        cost = {
            energy = 5000
            sr_zro = 1000
        }
    }
    potential = {
        has_global_flag = planetarydiversityshroud
        OR = {
        owner = {
            has_ascension_perk = ap_transcendence
        }
            owner = {
                has_ascension_perk = ap_synthetic_transcendence
            }
            owner = {
                has_ascension_perk = ap_machine_transcendence
            }
        }
        is_artificial = no
        NOT = {
            is_planet_class = pc_pdshroud
        }
        NOT = {
            is_planet_class = pc_city
        }
        NOT = {
            is_planet_class = pc_shroudcity
        }
        NOT = {
            is_planet_class = pc_shroudecocity
        }
        NOT = {
            is_planet_class = pc_shroudcapitalarc
        }
        NOT = {
            is_planet_class = pc_shroudpalacearc
        }
        NOT = {
            is_planet_class = pc_shroudmilarc
        }
        NOT = {
            is_planet_class = pc_shroudcorpoarc
        }
        NOT = {
            is_planet_class = pc_ecocity
        }
        NOT = {
            is_planet_class = pc_corpoarc
        }
        NOT = {
            is_planet_class = pc_palacearc
        }
        NOT = {
            is_planet_class = pc_capitalarc
        }
        NOT = {
            is_planet_class = pc_milarc
        }
        NOT = {
            is_planet_class = pc_necropolis
        }
        NOT = {
            is_planet_class = pc_machine_necropolis
        }
        NOT = {
            is_planet_class = pc_necrohive
        }
        NOT = {
            is_planet_class = pc_relic
        }
        NOT = {
            is_planet_class = pc_milarc_relic
        }
        NOT = {
            is_planet_class = pc_crystal
        }
        NOT = {
            is_planet_class = pc_graveyard
        }
        NOT = {
            is_planet_class = pc_floating
        }
        NOT = {
            is_planet_class = pc_archive
        }
        NOT = {
            is_planet_class = pc_technoorganic
        }
        NOT = {
            is_planet_class = pc_pd_barren_cold_hab
        }
        NOT = {
            is_planet_class = pc_pd_barren_hab
        }
        NOT = {
            is_planet_class = pc_pd_frozen_hab
        }
        NOT = {
            is_planet_class = pc_pd_gas_giant_hab
        }
        NOT = {
            is_planet_class = pc_pd_hothouse_hab
        }
        NOT = {
            is_planet_class = pc_pd_molten_hab
        }
        NOT = {
            is_planet_class = pc_pd_toxic_hab
        }
        NOT = {
            is_planet_class = pc_pd_asteroid_hab
        }
        NOT = {
            is_planet_class = pc_gd_hydrocarbon_hab
        }
    }
    effect = {
        custom_tooltip = decision_shroud_world_effects_custom
        change_pc = pc_pdshroud
        if = {
            limit = {
                has_modifier = engineered_environment_gaia
            }
            remove_modifier = engineered_environment_gaia
        }
        if = {
            limit = {
                has_modifier = engineered_environment
            }
            remove_modifier = engineered_environment
        }
        if = {
            limit = {
                has_modifier = bleak_planet
            }
            remove_modifier = bleak_planet
        }
        if = {
            limit = {
                has_modifier = high_gravity
            }
            remove_modifier = high_gravity
        }
        if = {
            limit = {
                has_modifier = irradiated_planet
            }
            remove_modifier = irradiated_planet
        }
        if = {
            limit = {
                has_modifier = mineral_poor
            }
            remove_modifier = mineral_poor
        }
        if = {
            limit = {
                has_modifier = unstable_tectonics
            }
            remove_modifier = unstable_tectonics
        }
        if = {
            limit = {
                has_modifier = weak_magnetic_field
            }
            remove_modifier = weak_magnetic_field
        }
        if = {
            limit = {
                has_modifier = exofungus
            }
            remove_modifier = exofungus
        }
        if = {
            limit = {
                has_modifier = exofungus
            }
            remove_modifier = exofungus
        }
        hidden_effect = {
            add_deposit = d_pdshroud
            remove_modifier = geothermal
            remove_deposit = d_geothermal_slurry_site
            remove_modifier = superhabitable
            remove_deposit = d_ancient_motes
            remove_modifier = aquatic
            remove_deposit = d_aquatic_trench
            remove_modifier = tidal_locked2
            remove_deposit = d_nightside_mining_operations
            remove_modifier = karst
            remove_deposit = d_karst_cave
            remove_modifier = ammonia
            remove_deposit = d_ammonia_sea
            remove_modifier = pdsulfur
            remove_deposit = d_sulfur_pool
            remove_modifier = pdacid
            remove_deposit = d_acid_lakes
            remove_deposit = d_pdacid_rain
            remove_modifier = methane
            remove_deposit = d_frozen_gas_mountain
            remove_modifier = ash
            remove_modifier = primal
            remove_deposit = d_lava_lakes
            remove_modifier = radiotrophic
            remove_deposit = d_rad_blooms_field
            remove_modifier = biolumen
            remove_deposit = d_biolumen_nature_preserve
            remove_modifier = pdsalt
            remove_deposit = d_salt_caves
            remove_modifier = pdaquifer
            remove_deposit = d_aquifer_cave
            remove_modifier = pdmegaflora
            remove_deposit = d_megaflora_deposit
            remove_modifier = pdmegaflora
            remove_deposit = d_megaflora_deposit
            remove_modifier = pdcoral
            remove_deposit = d_coral_fields
            remove_modifier = supercon
            remove_deposit = d_supercon_site
            remove_modifier = pdstorm
            remove_deposit = d_storm_corridor
            remove_modifier = pdglacio
            remove_deposit = d_glacio_lake
            remove_modifier = pdlanthanide
            remove_deposit = d_lanthanide_deposit
            remove_modifier = pdrogue
            remove_deposit = d_rogue_geo
            remove_modifier = pdlichen
            remove_deposit = d_lichen_forest
            remove_modifier = pdeyeball
            remove_deposit = d_eyeball_site
            remove_modifier = pdsulfur
            remove_deposit = d_sulfur_pool
            remove_modifier = lifeless_torrid
            remove_modifier = lifeless_temperate
            remove_modifier = lifeless_foggy
            if = {
                limit = {
                    has_modifier = katzenland_planet
                }
                remove_modifier = katzenland_planet
                add_modifier = {
                    modifier = "katzenland_planet_terraformed"
                    days = -1
                }
            }
            if = {
                limit = {
                    has_modifier = irradiated_desert_planet
                }
                remove_modifier = irradiated_desert_planet
            }
            IF = {
                limit = {
                    has_planet_flag = planet_earth
                }
                set_planet_entity = {
                    entity = "pdshroud_planet_earth_entity"
                }
            }
        }
    }
    ai_weight = {
        weight = 0
        modifier = {
            factor = 0
            or = {
                free_building_slots > 0
                owner = {
                    or = {
                        resource_stockpile_compare = {
                            resource = energy
                            value < 6000
                        }
                        resource_stockpile_compare = {
                            resource = influence
                            value < 150
                        }
                    }
                }
            }
        }
    }
}