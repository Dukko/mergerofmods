create_fourth_diadochi = {
    if = {
        limit = {
            exists = event_target:fourth_diadochi_origin
        }
        create_country = {
            name_list = random
            species = event_target:marauder_species
            type = default
            authority = auth_imperial
            civics = {
                civic = civic_diadochi
            }
            origin = "origin_khan_successor"
            ethos = {
                ethic = ethic_fanatic_militarist
                ethic = ethic_fanatic_xenophobe
                ethic = ethic_authoritarian
            }
            ignore_initial_colony_error = yes
        }
        last_created_country = {
            save_event_target_as = fourth_diadochi
            set_country_flag = diadochi_4
            set_country_flag = diadochi
            set_name = random
        }
        every_system_within_border = {
            limit = {
                has_star_flag = fourth_diadochi_system
                exists = starbase
            }
            starbase = {
                set_owner = event_target:fourth_diadochi
            }
        }
        every_owned_planet = {
            limit = {
                solar_system = {
                    has_star_flag = fourth_diadochi_system
                }
            }
            set_owner = event_target:fourth_diadochi
            set_controller = event_target:fourth_diadochi
        }
        event_target:fourth_diadochi = {
            add_resource = {
                minerals = 20000
                energy = 20000
                alloys = 20000
                consumer_goods = 20000
                food = 20000
                influence = 1000
            }
            copy_techs_from = {
                target = root
            }
            if = {
                limit = {
                    root = {
                        num_owned_relics > 0
                    }
                }
                steal_relic = {
                    target = root
                    relic = random
                }
            }
            every_owned_starbase = {
                set_starbase_size = starbase_outpost
            }
            if = {
                limit = {
                    any_owned_starbase = {
                        has_starbase_size = starbase_outpost
                    }
                }
                random_owned_starbase = {
                    limit = {
                        has_starbase_size = starbase_outpost
                    }
                    set_starbase_size = starbase_starhold
                    set_starbase_module = {
                        slot = 1
                        module = shipyard
                    }
                    set_starbase_module = {
                        slot = 2
                        module = shipyard
                    }
                    set_starbase_module = {
                        slot = 3
                        module = shipyard
                    }
                }
            }
            if = {
                limit = {
                    any_owned_starbase = {
                        has_starbase_size = starbase_outpost
                    }
                }
                random_owned_starbase = {
                    limit = {
                        has_starbase_size = starbase_outpost
                    }
                    set_starbase_size = starbase_starhold
                }
            }
            if = {
                limit = {
                    any_owned_starbase = {
                        has_starbase_size = starbase_outpost
                    }
                }
                random_owned_starbase = {
                    limit = {
                        has_starbase_size = starbase_outpost
                    }
                    set_starbase_size = starbase_starhold
                }
            }
            every_planet_within_border = {
                set_surveyed = {
                    surveyed = yes
                    surveyor = event_target:fourth_diadochi
                }
            }
            root = {
                every_planet_within_border = {
                    set_surveyed = {
                        surveyed = yes
                        surveyor = event_target:fourth_diadochi
                    }
                }
            }
            every_planet_within_border = {
                limit = {
                    has_deposit_for = shipclass_mining_station
                    has_mining_station = no
                }
                create_mining_station = {
                    owner = event_target:fourth_diadochi
                }
            }
            every_planet_within_border = {
                limit = {
                    has_deposit_for = shipclass_research_station
                    has_research_station = no
                }
                create_research_station = {
                    owner = event_target:fourth_diadochi
                }
            }
            create_ship_design = {
                design = "NAME_Pirate_Transport"
            }
            add_ship_design = last_created_design
            create_ship_design = {
                design = "NAME_Clan_Builder"
            }
            add_ship_design = last_created_design
            random_owned_planet = {
                save_event_target_as = unit_spawn_point
            }
            create_leader = {
                class = admiral
                species = owner_main_species
                name = random
                skill = 3
                leader_age_min = 25
                leader_age_max = 45
                traits = {
                    trait = leader_trait_mercenary_warrior
                    trait = random_trait
                }
            }
            create_fleet = {
                effect = {
                    set_owner = event_target:fourth_diadochi
                    create_dyn_marauder_fleet = {
                        OUTRIDER = 16
                        LANCER = 8
                    }
                    assign_leader = last_created_leader
                    set_location = {
                        target = event_target:unit_spawn_point
                        distance = 45
                        angle = random
                    }
                }
                settings = {
                    uses_naval_capacity = no
                }
            }
            create_leader = {
                class = general
                species = owner_main_species
                name = random
                skill = 3
                traits = {
                    trait = random_trait
                }
            }
            create_fleet = {
                effect = {
                    set_owner = event_target:fourth_diadochi
                    while = {
                        count = 12
                        create_army_transport = {
                            ship_name = "NAME_Pirate_Transport"
                            graphical_culture = "mammalian_01"
                            army_type = "assault_army"
                            species = event_target:fourth_diadochi
                        }
                    }
                    set_location = {
                        target = event_target:unit_spawn_point
                        distance = 20
                        angle = random
                    }
                }
            }
            last_created_army = {
                assign_leader = last_created_leader
            }
            create_fleet = {
                effect = {
                    set_owner = event_target:fourth_diadochi
                    create_ship = {
                        name = random
                        design = "NAME_Clan_Builder"
                    }
                    set_location = {
                        target = event_target:unit_spawn_point
                        distance = 20
                        angle = random
                    }
                }
            }
        }
        every_country = {
            limit = {
                OR = {
                    has_communications = root
                    has_government = gov_diadochi
                }
            }
            establish_communications_no_message = event_target:fourth_diadochi
        }
    }
}