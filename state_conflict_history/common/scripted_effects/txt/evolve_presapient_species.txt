namespace = rapid_evolution
evolve_presapient_species = {
    random_owned_species = {
        limit = {
            is_sapient = no
        }
        switch = {
            trigger = is_species_class
            PRE_HUM = {
                create_evolved_species = {
                    class = HUM
                    trait = trait_mammalian
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_humanoid_hp_01 = {
                            change_species_portrait = humanoid_hp_01
                        }
                        pre_humanoid_hp_02 = {
                            change_species_portrait = humanoid_hp_02
                        }
                        pre_humanoid_hp_07 = {
                            change_species_portrait = humanoid_hp_07
                        }
                        pre_humanoid_hp_08 = {
                            change_species_portrait = humanoid_hp_08
                        }
                        pre_humanoid_hp_09 = {
                            change_species_portrait = humanoid_hp_09
                        }
                        pre_humanoid_hp_10 = {
                            change_species_portrait = humanoid_hp_10
                        }
                        pre_humanoid_hp_11 = {
                            change_species_portrait = humanoid_hp_11
                        }
                        pre_humanoid_hp_12 = {
                            change_species_portrait = humanoid_hp_12
                        }
                        pre_humanoid_hp_13 = {
                            change_species_portrait = humanoid_hp_13
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_MAM = {
                create_evolved_species = {
                    class = MAM
                    trait = trait_mammalian
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_mam1 = {
                            change_species_portrait = mam1
                        }
                        pre_mam2 = {
                            change_species_portrait = mam2
                        }
                        pre_mam3 = {
                            change_species_portrait = mam3
                        }
                        pre_mam4 = {
                            change_species_portrait = mam4
                        }
                        pre_mam5 = {
                            change_species_portrait = mam5
                        }
                        pre_mam6 = {
                            change_species_portrait = mam6
                        }
                        pre_mam7 = {
                            change_species_portrait = mam7
                        }
                        pre_mam8 = {
                            change_species_portrait = mam8
                        }
                        pre_mam9 = {
                            change_species_portrait = mam9
                        }
                        pre_mam10 = {
                            change_species_portrait = mam10
                        }
                        pre_mam11 = {
                            change_species_portrait = mam11
                        }
                        pre_mam12 = {
                            change_species_portrait = mam12
                        }
                        pre_mam13 = {
                            change_species_portrait = mam13
                        }
                        pre_mam14 = {
                            change_species_portrait = mam14
                        }
                        pre_mam15 = {
                            change_species_portrait = mam15
                        }
                        pre_mam16 = {
                            change_species_portrait = mam16
                        }
                        pre_mam17 = {
                            change_species_portrait = mam17
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_REP = {
                create_evolved_species = {
                    class = REP
                    trait = trait_reptilian
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_rep1 = {
                            change_species_portrait = rep1
                        }
                        pre_rep2 = {
                            change_species_portrait = rep2
                        }
                        pre_rep3 = {
                            change_species_portrait = rep3
                        }
                        pre_rep4 = {
                            change_species_portrait = rep4
                        }
                        pre_rep5 = {
                            change_species_portrait = rep5
                        }
                        pre_rep6 = {
                            change_species_portrait = rep6
                        }
                        pre_rep7 = {
                            change_species_portrait = rep7
                        }
                        pre_rep8 = {
                            change_species_portrait = rep8
                        }
                        pre_rep09 = {
                            change_species_portrait = rep9
                        }
                        pre_rep10 = {
                            change_species_portrait = rep10
                        }
                        pre_rep11 = {
                            change_species_portrait = rep11
                        }
                        pre_rep12 = {
                            change_species_portrait = rep12
                        }
                        pre_rep13 = {
                            change_species_portrait = rep13
                        }
                        pre_rep14 = {
                            change_species_portrait = rep14
                        }
                        pre_rep15 = {
                            change_species_portrait = rep15
                        }
                        pre_rep16 = {
                            change_species_portrait = rep16
                        }
                        pre_rep17 = {
                            change_species_portrait = rep17
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_AVI = {
                create_evolved_species = {
                    class = AVI
                    trait = trait_avian
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_avi1 = {
                            change_species_portrait = avi1
                        }
                        pre_avi2 = {
                            change_species_portrait = avi2
                        }
                        pre_avi3 = {
                            change_species_portrait = avi3
                        }
                        pre_avi4 = {
                            change_species_portrait = avi4
                        }
                        pre_avi5 = {
                            change_species_portrait = avi5
                        }
                        pre_avi6 = {
                            change_species_portrait = avi6
                        }
                        pre_avi7 = {
                            change_species_portrait = avi7
                        }
                        pre_avi8 = {
                            change_species_portrait = avi8
                        }
                        pre_avi9 = {
                            change_species_portrait = avi9
                        }
                        pre_avi10 = {
                            change_species_portrait = avi10
                        }
                        pre_avi11 = {
                            change_species_portrait = avi11
                        }
                        pre_avi12 = {
                            change_species_portrait = avi12
                        }
                        pre_avi13 = {
                            change_species_portrait = avi13
                        }
                        pre_avi14 = {
                            change_species_portrait = avi14
                        }
                        pre_avi15 = {
                            change_species_portrait = avi15
                        }
                        pre_avi16 = {
                            change_species_portrait = avi16
                        }
                        pre_avi17 = {
                            change_species_portrait = avi17
                        }
                        pre_avi18 = {
                            change_species_portrait = avi18
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_ART = {
                create_evolved_species = {
                    class = ART
                    trait = trait_arthropoid
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_art1 = {
                            change_species_portrait = art1
                        }
                        pre_art3 = {
                            change_species_portrait = art3
                        }
                        pre_art5 = {
                            change_species_portrait = art5
                        }
                        pre_art6 = {
                            change_species_portrait = art6
                        }
                        pre_art7 = {
                            change_species_portrait = art7
                        }
                        pre_art8 = {
                            change_species_portrait = art8
                        }
                        pre_art9 = {
                            change_species_portrait = art9
                        }
                        pre_art10 = {
                            change_species_portrait = art10
                        }
                        pre_art11 = {
                            change_species_portrait = art11
                        }
                        pre_art12 = {
                            change_species_portrait = art12
                        }
                        pre_art13 = {
                            change_species_portrait = art13
                        }
                        pre_art14 = {
                            change_species_portrait = art14
                        }
                        pre_art15 = {
                            change_species_portrait = art15
                        }
                        pre_art19 = {
                            change_species_portrait = art19
                        }
                        pre_art16 = {
                            change_species_portrait = art16
                        }
                        pre_art17 = {
                            change_species_portrait = art17
                        }
                        pre_art18 = {
                            change_species_portrait = art18
                        }
                        pre_art20 = {
                            change_species_portrait = art20
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_MOL = {
                create_evolved_species = {
                    class = MOL
                    trait = trait_molluscoid
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_mol1 = {
                            change_species_portrait = mol1
                        }
                        pre_mol2 = {
                            change_species_portrait = mol2
                        }
                        pre_mol3 = {
                            change_species_portrait = mol3
                        }
                        pre_mol4 = {
                            change_species_portrait = mol4
                        }
                        pre_mol5 = {
                            change_species_portrait = mol5
                        }
                        pre_mol6 = {
                            change_species_portrait = mol6
                        }
                        pre_mol7 = {
                            change_species_portrait = mol7
                        }
                        pre_mol8 = {
                            change_species_portrait = mol8
                        }
                        pre_mol11 = {
                            change_species_portrait = mol11
                        }
                        pre_mol12 = {
                            change_species_portrait = mol12
                        }
                        pre_mol13 = {
                            change_species_portrait = mol13
                        }
                        pre_mol14 = {
                            change_species_portrait = mol14
                        }
                        pre_mol15 = {
                            change_species_portrait = mol15
                        }
                        pre_mol16 = {
                            change_species_portrait = mol16
                        }
                        pre_mol17 = {
                            change_species_portrait = mol17
                        }
                        pre_mol18 = {
                            change_species_portrait = mol18
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_FUN = {
                create_evolved_species = {
                    class = FUN
                    trait = trait_fungoid
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_fun1 = {
                            change_species_portrait = fun1
                        }
                        pre_fun2 = {
                            change_species_portrait = fun2
                        }
                        pre_fun3 = {
                            change_species_portrait = fun3
                        }
                        pre_fun4 = {
                            change_species_portrait = fun4
                        }
                        pre_fun6 = {
                            change_species_portrait = fun6
                        }
                        pre_fun7 = {
                            change_species_portrait = fun7
                        }
                        pre_fun8 = {
                            change_species_portrait = fun8
                        }
                        pre_fun9 = {
                            change_species_portrait = fun9
                        }
                        pre_fun10 = {
                            change_species_portrait = fun10
                        }
                        pre_fun11 = {
                            change_species_portrait = fun11
                        }
                        pre_fun12 = {
                            change_species_portrait = fun12
                        }
                        pre_fun13 = {
                            change_species_portrait = fun13
                        }
                        pre_fun14 = {
                            change_species_portrait = fun14
                        }
                        pre_fun15 = {
                            change_species_portrait = fun15
                        }
                        pre_fun16 = {
                            change_species_portrait = fun16
                        }
                        pre_fun17 = {
                            change_species_portrait = fun17
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_PLANT = {
                create_evolved_species = {
                    class = PLANT
                    trait = trait_plantoid
                }
                last_created_species = {
                    switch = {
                        trigger = species_portrait
                        pre_pla1 = {
                            change_species_portrait = pla1
                        }
                        pre_pla2 = {
                            change_species_portrait = pla2
                        }
                        pre_pla3 = {
                            change_species_portrait = pla3
                        }
                        pre_pla4 = {
                            change_species_portrait = pla4
                        }
                        pre_pla5 = {
                            change_species_portrait = pla5
                        }
                        pre_pla6 = {
                            change_species_portrait = pla6
                        }
                        pre_pla7 = {
                            change_species_portrait = pla7
                        }
                        pre_pla8 = {
                            change_species_portrait = pla8
                        }
                        pre_pla9 = {
                            change_species_portrait = pla9
                        }
                        pre_pla10 = {
                            change_species_portrait = pla10
                        }
                        pre_pla11 = {
                            change_species_portrait = pla11
                        }
                        pre_pla12 = {
                            change_species_portrait = pla12
                        }
                        pre_pla13 = {
                            change_species_portrait = pla13
                        }
                        pre_pla14 = {
                            change_species_portrait = pla14
                        }
                        pre_pla15 = {
                            change_species_portrait = pla15
                        }
                        pre_pla16 = {
                            change_species_portrait = pla16_baol
                        }
                        default = {
                        }
                    }
                }
            }
            PRE_LITHOID = {
                create_evolved_species = {
                    class = LITHOID
                    trait = trait_lithoid
                }
            }
            default = {
                create_evolved_species = {
                    class = NECROID
                    trait = trait_necroid
                }
            }
        }
        save_event_target_as = evolving_species
    }
    random_owned_pop = {
        limit = {
            is_same_species = event_target:evolving_species
        }
        change_species = last_created_species
        IF = {
            limit = {
                species = {
                    has_species_flag = owed_traits_minus_1
                }
            }
            add_random_minus_1_trait = yes
        }
        IF = {
            limit = {
                species = {
                    has_species_flag = owed_traits_minus_2
                }
            }
            add_random_minus_2_trait = yes
        }
    }
    every_owned_pop = {
        limit = {
            is_same_species = event_target:evolving_species
        }
        change_species = last_created_species
    }
}