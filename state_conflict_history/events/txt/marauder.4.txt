namespace = marauder
country_event = {
    id = marauder.4
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        is_country_type = dormant_marauders
        OR = {
            AND = {
                FROMFROM = {
                    is_ship_size = marauder_void_dwelling
                }
                count_owned_ship = {
                    limit = {
                        is_ship_size = marauder_void_dwelling
                    }
                    count = 0
                }
                num_starbases = 0
            }
            AND = {
                FROMFROM = {
                    is_ship_size = starbase_marauder
                }
                count_owned_ship = {
                    limit = {
                        is_ship_size = marauder_void_dwelling
                    }
                    count = 0
                }
                num_starbases = 1
            }
        }
    }
    immediate = {
        from = {
            save_event_target_as = marauder_killer
        }
        owner_species = {
            save_event_target_as = marauder_species
        }
        every_country = {
            limit = {
                is_ai = no
                has_communications = root
            }
            country_event = {
                id = marauder.5
            }
        }
        random_relation = {
            limit = {
                is_country_type = default
                has_policy_flag = refugees_allowed
                has_communications = root
            }
            country_event = {
                id = marauder.9
                days = 10
                random = 10
            }
        }
        if = {
            limit = {
                has_country_flag = marauder_1
            }
            every_country = {
                limit = {
                    any_owned_fleet = {
                        OR = {
                            has_fleet_flag = armada_of_the_voidborn
                            has_fleet_flag = star_rider_flotilla
                            has_fleet_flag = first_storm_wing
                        }
                    }
                }
                country_event = {
                    id = marauder.76
                    days = 20
                    random = 20
                }
            }
        }
        if = {
            limit = {
                has_country_flag = marauder_2
            }
            every_country = {
                limit = {
                    any_owned_fleet = {
                        OR = {
                            has_fleet_flag = dwamak_bashers
                            has_fleet_flag = unhinged_screamer_flotilla
                            has_fleet_flag = frenzied_volunteer_squadron
                        }
                    }
                }
                country_event = {
                    id = marauder.76
                    days = 20
                    random = 20
                }
            }
        }
        if = {
            limit = {
                has_country_flag = marauder_3
            }
            every_country = {
                limit = {
                    any_owned_fleet = {
                        OR = {
                            has_fleet_flag = her_chosen_champions
                            has_fleet_flag = order_of_eternal_night
                            has_fleet_flag = twilight_congregation
                        }
                    }
                }
                country_event = {
                    id = marauder.76
                    days = 20
                    random = 20
                }
            }
        }
        if = {
            limit = {
                from = {
                    is_country_type = default
                }
                OR = {
                    has_country_flag = merc_fleet_1_hired
                    has_country_flag = merc_fleet_2_hired
                    has_country_flag = merc_fleet_3_hired
                }
            }
            from = {
                country_event = {
                    id = marauder.6
                    days = 100
                    random = 50
                }
            }
        }
        else = {
            destroy_country = yes
        }
        set_country_type = ruined_marauders
    }
}