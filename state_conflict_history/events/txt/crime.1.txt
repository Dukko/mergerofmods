namespace = crime
planet_event = {
    id = crime.1
    title = crime.1.name
    desc = {
        trigger = {
            owner = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
        }
        text = crime.1.desc
    }
    desc = {
        trigger = {
            owner = {
                has_authority = auth_hive_mind
            }
        }
        text = crime.1.b.desc
    }
    desc = {
        trigger = {
            owner = {
                has_authority = auth_machine_intelligence
            }
        }
        text = crime.1.c.desc
    }
    picture = {
        trigger = {
            owner = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
        }
        picture = GFX_evt_dark_alley
    }
    picture = {
        trigger = {
            owner = {
                has_authority = auth_hive_mind
            }
        }
        picture = GFX_evt_hive_mind
    }
    picture = {
        trigger = {
            owner = {
                has_authority = auth_machine_intelligence
            }
        }
        picture = GFX_evt_glitchy_matrix
    }
    show_sound = event_criminal_activity
    location = root
    pre_triggers = {
        has_owner = yes
    }
    trigger = {
        is_under_colonization = no
        owner = {
            is_country_type = default
        }
        NOR = {
            has_planet_flag = criminal_underworld_event_up
            has_modifier = unemployment_benefits
            has_modifier = activity_program
            has_modifier = standby_mode
            has_modifier = criminal_underworld
            has_modifier = drone_deviancy
            has_modifier = drone_corruption
            has_modifier = gang_wars
            has_modifier = center_of_drug_trade
            has_modifier = mob_rule
        }
        NOT = {
            has_planet_flag = criminal_underworld_disappeared
        }
        num_pops > 3
        OR = {
            AND = {
                count_owned_pop = {
                    limit = {
                        is_shackled_robot = no
                        is_unemployed = yes
                        NOR = {
                            has_living_standard = {
                                type = living_standard_utopian
                            }
                            has_living_standard = {
                                type = living_standard_good
                            }
                            has_living_standard = {
                                type = living_standard_shared_burden
                            }
                        }
                    }
                    count > 3
                }
                owner = {
                    is_gestalt = no
                }
            }
            AND = {
                count_owned_pop = {
                    limit = {
                        is_unemployed = yes
                        NOT = {
                            has_living_standard = {
                                type = living_standard_organic_trophy
                            }
                        }
                    }
                    count > 10
                }
                owner = {
                    is_gestalt = yes
                }
            }
        }
    }
    immediate = {
        set_planet_flag = criminal_underworld_event_up
    }
    after = {
        hidden_effect = {
            remove_planet_flag = criminal_underworld_event_up
        }
    }
    mean_time_to_happen = {
        months = 180
        modifier = {
            factor = 0.5
            num_assigned_jobs = {
                job = unemployed
                value > 5
            }
        }
        modifier = {
            factor = 0.5
            num_assigned_jobs = {
                job = unemployed
                value > 7
            }
        }
        modifier = {
            factor = 0.5
            num_assigned_jobs = {
                job = unemployed
                value > 9
            }
        }
        modifier = {
            factor = 0.5
            num_assigned_jobs = {
                job = unemployed
                value > 11
            }
        }
    }
    option = {
        name = crime.1.a
        trigger = {
            owner = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
        }
        add_modifier = {
            modifier = "unemployment_benefits"
            days = 3600
        }
    }
    option = {
        name = crime.1.a2
        trigger = {
            owner = {
                has_authority = auth_hive_mind
            }
        }
        add_modifier = {
            modifier = "activity_program"
            days = 3600
        }
    }
    option = {
        name = crime.1.a3
        custom_tooltip = crime.1.a3.tooltip
        trigger = {
            owner = {
                has_authority = auth_machine_intelligence
            }
        }
        hidden_effect = {
            add_modifier = {
                modifier = "standby_mode"
                days = 3600
            }
        }
    }
    option = {
        name = crime.1.b
        trigger = {
            owner = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
        }
        add_modifier = {
            modifier = criminal_underworld
            days = -1
        }
    }
    option = {
        name = crime.1.b2
        trigger = {
            owner = {
                has_authority = auth_hive_mind
            }
        }
        add_modifier = {
            modifier = drone_deviancy
            days = -1
        }
    }
    option = {
        name = crime.1.b3
        trigger = {
            owner = {
                has_authority = auth_machine_intelligence
            }
        }
        add_modifier = {
            modifier = drone_corruption
            days = -1
        }
    }
}