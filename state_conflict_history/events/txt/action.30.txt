namespace = action
country_event = {
    id = action.30
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        is_country_type = rebel
    }
    immediate = {
        set_country_type = default
        if = {
            limit = {
                has_country_flag = slave_rebels
            }
            random_playable_country = {
                limit = {
                    reverse_has_relation_flag = {
                        flag = rebelling_slaves_former_owner
                        who = root
                    }
                }
                save_event_target_as = rsfo
            }
            random_list = {
                1 = {
                    country_add_ethic = ethic_fanatic_materialist
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_materialist
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_spiritualist
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_spiritualist
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_militarist
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_militarist
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_pacifist
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_pacifist
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_xenophile
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_xenophile
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_xenophobe
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_xenophobe
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_egalitarian
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_egalitarian
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_fanatic_authoritarian
                    modifier = {
                        factor = 0
                        event_target:rsfo = {
                            has_ethic = ethic_fanatic_authoritarian
                        }
                    }
                }
            }
            random_list = {
                1 = {
                    country_add_ethic = ethic_materialist
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_materialist
                            has_ethic = ethic_fanatic_spiritualist
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_materialist
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_spiritualist
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_spiritualist
                            has_ethic = ethic_fanatic_materialist
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_spiritualist
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_militarist
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_militarist
                            has_ethic = ethic_fanatic_pacifist
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_militarist
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_pacifist
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_pacifist
                            has_ethic = ethic_fanatic_militarist
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_pacifist
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_xenophile
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_xenophile
                            has_ethic = ethic_fanatic_xenophobe
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_xenophile
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_xenophobe
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_xenophobe
                            has_ethic = ethic_fanatic_xenophile
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_xenophobe
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_egalitarian
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_egalitarian
                            has_ethic = ethic_fanatic_authoritarian
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_egalitarian
                            }
                        }
                    }
                }
                1 = {
                    country_add_ethic = ethic_authoritarian
                    modifier = {
                        factor = 0
                        OR = {
                            has_ethic = ethic_fanatic_authoritarian
                            has_ethic = ethic_fanatic_egalitarian
                            event_target:rsfo = {
                                has_ethic = ethic_fanatic_authoritarian
                            }
                        }
                    }
                }
            }
        }
        else_if = {
            limit = {
                has_country_flag = standard_unrest_rebels
            }
            random_list = {
                70 = {
                    random_list = {
                        1 = {
                            country_add_ethic = ethic_fanatic_materialist
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_spiritualist
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_militarist
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_pacifist
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_xenophile
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_xenophobe
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_egalitarian
                        }
                        1 = {
                            country_add_ethic = ethic_fanatic_authoritarian
                        }
                    }
                    random_list = {
                        1 = {
                            country_add_ethic = ethic_materialist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_materialist
                                    has_ethic = ethic_fanatic_spiritualist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_spiritualist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_spiritualist
                                    has_ethic = ethic_fanatic_materialist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_militarist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_militarist
                                    has_ethic = ethic_fanatic_pacifist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_pacifist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_pacifist
                                    has_ethic = ethic_fanatic_militarist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophile
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_xenophile
                                    has_ethic = ethic_fanatic_xenophobe
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophobe
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_xenophobe
                                    has_ethic = ethic_fanatic_xenophile
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_egalitarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_egalitarian
                                    has_ethic = ethic_fanatic_authoritarian
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_authoritarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_fanatic_authoritarian
                                    has_ethic = ethic_fanatic_egalitarian
                                }
                            }
                        }
                    }
                }
                30 = {
                    random_list = {
                        1 = {
                            country_add_ethic = ethic_materialist
                        }
                        1 = {
                            country_add_ethic = ethic_spiritualist
                        }
                        1 = {
                            country_add_ethic = ethic_militarist
                        }
                        1 = {
                            country_add_ethic = ethic_pacifist
                        }
                        1 = {
                            country_add_ethic = ethic_xenophile
                        }
                        1 = {
                            country_add_ethic = ethic_xenophobe
                        }
                        1 = {
                            country_add_ethic = ethic_egalitarian
                        }
                        1 = {
                            country_add_ethic = ethic_authoritarian
                        }
                    }
                    random_list = {
                        1 = {
                            country_add_ethic = ethic_materialist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_materialist
                                    has_ethic = ethic_spiritualist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_spiritualist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_spiritualist
                                    has_ethic = ethic_materialist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_militarist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_militarist
                                    has_ethic = ethic_pacifist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_pacifist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_pacifist
                                    has_ethic = ethic_militarist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophile
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_xenophile
                                    has_ethic = ethic_xenophobe
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophobe
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_xenophobe
                                    has_ethic = ethic_xenophile
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_egalitarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_egalitarian
                                    has_ethic = ethic_authoritarian
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_authoritarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_authoritarian
                                    has_ethic = ethic_egalitarian
                                }
                            }
                        }
                    }
                    random_list = {
                        1 = {
                            country_add_ethic = ethic_materialist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_materialist
                                    has_ethic = ethic_spiritualist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_spiritualist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_spiritualist
                                    has_ethic = ethic_materialist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_militarist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_militarist
                                    has_ethic = ethic_pacifist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_pacifist
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_pacifist
                                    has_ethic = ethic_militarist
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophile
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_xenophile
                                    has_ethic = ethic_xenophobe
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_xenophobe
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_xenophobe
                                    has_ethic = ethic_xenophile
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_egalitarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_egalitarian
                                    has_ethic = ethic_authoritarian
                                }
                            }
                        }
                        1 = {
                            country_add_ethic = ethic_authoritarian
                            modifier = {
                                factor = 0
                                OR = {
                                    has_ethic = ethic_authoritarian
                                    has_ethic = ethic_egalitarian
                                }
                            }
                        }
                    }
                }
            }
        }
        from = {
            solar_system = {
                every_fleet_in_system = {
                    limit = {
                        is_ship_class = shipclass_military_station
                    }
                    set_owner = root
                }
                if = {
                    limit = {
                        exists = starbase
                    }
                    starbase = {
                        set_owner = root
                    }
                }
            }
        }
        add_resource = {
            minerals = 200
            energy = 200
            influence = 250
        }
    }
}