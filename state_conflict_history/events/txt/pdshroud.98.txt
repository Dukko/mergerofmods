namespace = pdshroud
planet_event = {
    id = pdshroud.98
    title = pdshroud.98.name
    desc = pdshroud.98.desc
    picture = GFX_evt_shroud1
    show_sound = event_mystic_reveal
    location = root
    is_triggered_only = yes
    immediate = {
        planet = {
            IF = {
                limit = {
                    is_planet_class = pc_shrouded
                }
            change_pc = pc_pdshroud
            reroll_deposits = yes
            add_deposit = d_pdshroud
            remove_planet_flag = pd_shroud_transformation
            remove_modifier = pdshroudtransformation
        }
            IF = {
                limit = {
                    NOT = {
                        is_planet_class = pc_shrouded
                    }
                }
                change_pc = pc_pdshroud
                if = {
                    limit = {
                        has_modifier = engineered_environment_gaia
                    }
                    remove_modifier = engineered_environment_gaia
                }
                if = {
                    limit = {
                        has_modifier = engineered_environment
                    }
                    remove_modifier = engineered_environment
                }
                if = {
                    limit = {
                        has_modifier = bleak_planet
                    }
                    remove_modifier = bleak_planet
                }
                if = {
                    limit = {
                        has_modifier = high_gravity
                    }
                    remove_modifier = high_gravity
                }
                if = {
                    limit = {
                        has_modifier = irradiated_planet
                    }
                    remove_modifier = irradiated_planet
                }
                if = {
                    limit = {
                        has_modifier = mineral_poor
                    }
                    remove_modifier = mineral_poor
                }
                if = {
                    limit = {
                        has_modifier = unstable_tectonics
                    }
                    remove_modifier = unstable_tectonics
                }
                if = {
                    limit = {
                        has_modifier = weak_magnetic_field
                    }
                    remove_modifier = weak_magnetic_field
                }
                if = {
                    limit = {
                        has_modifier = exofungus
                    }
                    remove_modifier = exofungus
                }
                if = {
                    limit = {
                        has_modifier = exofungus
                    }
                    remove_modifier = exofungus
                }
                hidden_effect = {
                    add_deposit = d_pdshroud
                    remove_modifier = geothermal
                    remove_deposit = d_geothermal_slurry_site
                    remove_modifier = superhabitable
                    remove_deposit = d_ancient_motes
                    remove_modifier = aquatic
                    remove_deposit = d_aquatic_trench
                    remove_modifier = tidal_locked2
                    remove_deposit = d_nightside_mining_operations
                    remove_modifier = karst
                    remove_deposit = d_karst_cave
                    remove_modifier = ammonia
                    remove_deposit = d_ammonia_sea
                    remove_modifier = pdsulfur
                    remove_deposit = d_sulfur_pool
                    remove_modifier = pdacid
                    remove_deposit = d_acid_lakes
                    remove_deposit = d_pdacid_rain
                    remove_modifier = methane
                    remove_deposit = d_frozen_gas_mountain
                    remove_modifier = ash
                    remove_modifier = primal
                    remove_deposit = d_lava_lakes
                    remove_modifier = radiotrophic
                    remove_deposit = d_rad_blooms
                    remove_modifier = biolumen
                    remove_deposit = d_biolumen_nature_preserve
                    remove_deposit = d_pdshroud
                    remove_modifier = pdsalt
                    remove_deposit = d_salt_caves
                    remove_modifier = pdaquifer
                    remove_deposit = d_aquifer_cave
                    remove_modifier = pdmegaflora
                    remove_deposit = d_megaflora_deposit
                    remove_modifier = pdmegaflora
                    remove_deposit = d_megaflora_deposit
                    remove_modifier = pdcoral
                    remove_deposit = d_coral_fields
                    remove_modifier = supercon
                    remove_deposit = d_supercon_site
                    remove_modifier = pdstorm
                    remove_deposit = d_storm_corridor
                    remove_modifier = pdglacio
                    remove_deposit = d_glacio_lake
                    remove_modifier = pdlanthanide
                    remove_deposit = d_lanthanide_deposit
                    remove_modifier = pdrogue
                    remove_deposit = d_rogue_geo
                    remove_modifier = pdlichen
                    remove_deposit = d_lichen_forest
                    remove_modifier = pdeyeball
                    remove_deposit = d_eyeball_site
                    remove_modifier = pdsulfur
                    remove_deposit = d_sulfur_pool
                    IF = {
                        limit = {
                            has_planet_flag = planet_earth
                        }
                        set_planet_entity = {
                            entity = "pdshroud_planet_earth_entity"
                        }
                    }
                    remove_planet_flag = pd_shroud_transformation
                    remove_modifier = pdshroudtransformation
                }
            }
        }
    }
    option = {
        name = pdshroud.98.a
    }
}