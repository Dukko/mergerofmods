can_build_branch_office_on_planet = {
    custom_tooltip = {
        fail_text = requires_recipient_not_fanatic_purifiers
        exists = owner
        owner = {
            OR = {
                is_same_species = root
                NOT = {
                    has_civic = civic_fanatic_purifiers
                }
            }
        }
    }
    custom_tooltip = {
        fail_text = BRANCH_OFFICE_NOT_COMMERCIAL_PACT
        exists = owner
        OR = {
            root = {
                is_criminal_syndicate = yes
            }
            owner = {
                has_commercial_pact = root
            }
            owner = {
                is_in_federation_with = root
            }
            root = {
                is_subject = yes
                overlord = {
                    is_same_value = owner
                }
            }
            owner = {
                is_subject = yes
                overlord = {
                    is_same_value = root
                }
            }
            AND = {
                root = {
                    has_civic = civic_galactic_sovereign_megacorp
                }
                owner = {
                    is_galactic_community_member = yes
                }
            }
            AND = {
                root = {
                    has_modifier = imperial_charter
                }
                owner = {
                    is_galactic_community_member = yes
                }
            }
        }
    }
    custom_tooltip = {
        fail_text = BRANCH_OFFICE_CRIMINAL_HERITAGE_HAS_TRUCE
        exists = owner
        OR = {
            root = {
                is_criminal_syndicate = no
            }
            owner = {
                NOR = {
                    has_truce = root
                    is_at_war_with = root
                }
            }
        }
    }
    custom_tooltip = {
        fail_text = BRANCH_OFFICE_CRIMINAL_COOLDOWN
        exists = owner
        OR = {
            root = {
                is_criminal_syndicate = no
            }
            AND = {
                root = {
                    is_criminal_syndicate = yes
                    NOT = {
                        has_country_flag = prob_no_criminal_branch@root.owner
                    }
                }
                NOT = {
                    has_planet_flag = criminal_branch_closed_cooldown_planet@root
                }
            }
        }
    }
}